default_baseline: &dfbase
  threshold: 50 
  minimumfrac: 0.67
  default_filtering: 2

default_fit: &dfit
    int_ll:             254            # integration lower limit in ticks
    int_ul:             290            # integration upper limit in ticks
    bins_int:           75             # binning of the histogram
    domain_int:         [-0.5, 2.7]    # min and max value of histogram x-axis
    max_peaks:          3              # maximum number of peaks to fit
    half_point_to_fit:  3              # positive int, maximum number of bins to the left and right of the peak to fit
    prominence:         0.15           # 0 to 1, minimum fraction of peaks to spot relative to maximum peak
    initial_percentage: 0.10           # 0 to 1, starting percentage to search for peaks
    percentage_step:    0.05           # if n peaks < max_peaks, increase the percentage by this value

107: {
  47: { baseline: { <<: *dfbase}, fit: { <<: *dfit }}, # M1(1)
  45: { baseline: { <<: *dfbase}, fit: { <<: *dfit }}, # M1(2)
  40: { baseline: { <<: *dfbase}, fit: { <<: *dfit }}, # M2(1)
  42: { baseline: { <<: *dfbase}, fit: { <<: *dfit }}, # M2(2)
  46: { baseline: { <<: *dfbase}, fit: { <<: *dfit, bins_int: 75, domain_int: [-0.5, 2.7], int_ul: 285, half_point_to_fit: 5}}, # M3(1)
  44: { baseline: { <<: *dfbase}, fit: { <<: *dfit, domain_int: [-0.4, 2.5], half_point_to_fit: 3, int_ul: 285, bins_int: 70 }}, # M3(2)
  43: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300, bins_int: 70, domain_int: [-0.5, 2.3]}}, # M4(1)
  41: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300}}, # M4(2)
  7: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300, domain_int: [-0.3, 1.7]}}, # M5(1)
  0: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 285, domain_int: [-0.5, 2.5]}}, # M5(2)
  27: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300, half_point_to_fit: 2, domain_int: [-0.3, 1.2]}}, # M6(1)
  20: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 285, domain_int: [-0.3, 1.5]}}, # M6(2)
  37: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300, domain_int: [-0.5, 2.7]}}, # M7(1)
  30: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300}}, # M7(2)
  17: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300}}, # M8(1)
  10: { baseline: { <<: *dfbase}, fit: { <<: *dfit, int_ul: 300}}, # M8(2)
}

# Threshold...
updates: {
  107: {
    # M1(1)
    47: {
    },
    # M1(2)
    45: {
    },
    # M2(1)
    40: {
    },
    # M2(2)
    42: {
    },
    # M3(1)
    46: {
      38785: {threshold: 43},
      38786: {threshold: 43},
      38787: {threshold: 43},
      38789: {threshold: 43},
      38790: {threshold: 42},
      38792: {threshold: 42},
      38794: {threshold: 42},
      38796: {threshold: 36},
      38798: {threshold: 35}
    },
    # M3(2)
    44: {
      38785: {threshold: 47, domain_int: [-0.3, 2.3]},
      38786: {threshold: 46},
      38787: {threshold: 45},
      38789: {threshold: 50},
      38790: {threshold: 45, domain_int: [-0.7, 2.5], bins_int: 50},
      38792: {threshold: 42, domain_int: [-0.7, 2.5], bins_int: 50},
      38794: {threshold: 39, half_point_to_fit: 4, domain_int: [-0.7, 2.5], bins_int: 50},
      38796: {threshold: 35},
      38798: {threshold: 35}
    },
    # M4(1)
    43: {
      38785: {threshold: 62, half_point_to_fit: 2},
      38786: {threshold: 58, half_point_to_fit: 2, max_peaks: 2},
      38787: {threshold: 56, half_point_to_fit: 2},
      38789: {threshold: 54, half_point_to_fit: 2, domain_int: [-0.7, 2.7]},
      38790: {threshold: 52, half_point_to_fit: 4, bins_int: 50},
      38792: {threshold: 52, half_point_to_fit: 2},
      38794: {threshold: 50, half_point_to_fit: 2},
      38796: {threshold: 50, half_point_to_fit: 2},
      38798: {threshold: 50, half_point_to_fit: 2}
    },
    # M4(2)
    41: {
      38877: {threshold: 75, domain_int: [-0.3, 2.5], bins_int: 70},
      38878: {threshold: 71, domain_int: [-0.3, 2.5], bins_int: 65},
      38879: {threshold: 69, bins_int: 65},
      38880: {threshold: 67, bins_int: 65},
      38881: {threshold: 67, domain_int: [-0.5, 2.5], bins_int: 85},
      38882: {threshold: 66, domain_int: [-0.5, 2.5], bins_int: 65},
      38883: {threshold: 60},
      38884: {threshold: 55},
      38885: {threshold: 50}
    },
    # M5(1)
  7: {
      38954: {threshold: 35.5},
      38955: {threshold: 30.5},
      38957: {threshold: 30.5, domain_int: [-0.2, 1.5], prominence: 0.1},
      38958: {threshold: 21},
      38959: {threshold: 21, domain_int: [-0.5, 1.5], half_point_to_fit: 5, prominence: 0.1},
      38960: {threshold: 16, domain_int: [-0.5, 1.7], prominence: 0.1},
        #38963: {threshold: }
    },
    # M5(2)
    0: {
      38965: {threshold: 35.5},
      38966: {threshold: 30.5 },
      38967: {threshold: 25.5},
      38968: {threshold: 21},
      38971: {threshold: 21},
      38972: {threshold: 16},
      39017: {threshold: 11, domain_int: [-0.5, 2.7]},
      39018: {threshold: 11},
        #38975: {threshold: }
    },
    # M6(1)
    27: {
      38977: {threshold: 25.5, domain_int: [-0.2, 1.2], prominence: 0.1},
      38978: {threshold: 21, domain_int: [-0.2, 1.2], pominence: 0.1},
      38979: {threshold: 21, domain_int: [-0.3, 1.2], prominence: 0.1},
      38980: {threshold: 16},
      38981: {threshold: 11.2},
      38982: {threshold: 11.2},
      38983: {threshold: 6.5, domain_int: [-0.3, 1.7]},
      38984: {threshold: 6.5, domain_int: [-0.3, 1.5]},
      38986: {threshold: 6.5, domain_int: [-0.3, 1.5]}
    },
    # M6(2)
    20: {
      38977: {threshold: 25.5},
      38978: {threshold: 21},
      38979: {threshold: 21},
      38980: {threshold: 16},
      38981: {threshold: 16},
      38982: {threshold: 11.2},
      38983: {threshold: 11.2},
      38984: {threshold: 6.5},
      38986: {threshold: 6.5, domain_int: [-0.5, 1.9]}
    },
    # M7(1)
    37: {
      38987: {threshold: 27,  domain_int: [-0.2,2.7], bins_int: 155},
      38988: {threshold: 25,  domain_int: [-0.2,2.7], bins_int: 155},
      38990: {threshold: 24.5,domain_int: [-0.2,2.7], bins_int: 155},
      38991: {threshold: 22.5,domain_int: [-0.2,2.7], bins_int: 175},
      38992: {threshold: 22,  domain_int: [-0.2,2.7], bins_int: 175},
      38993: {threshold: 21.5,domain_int: [-0.3,2.7], bins_int: 175},
      38994: {threshold: 21,  domain_int: [-0.4,2.7], bins_int: 175},
      38995: {threshold: 20.5,domain_int: [-0.4,2.7], bins_int: 175},
    },
    # M7(2)
    30: {
      38987: {threshold: 27,   domain_int: [-0.2,2.7], bins_int: 175},
      38988: {threshold: 24.8, domain_int: [-0.2,2.7], bins_int: 175},
      38990: {threshold: 24.5, domain_int: [-0.2,2.7], bins_int: 175},
      38991: {threshold: 22.5, domain_int: [-0.2,2.7], bins_int: 175},
      38992: {threshold: 22,   domain_int: [-0.2,2.7], bins_int: 175},
      38993: {threshold: 21.5, domain_int: [-0.3,2.7], bins_int: 175},
      38994: {threshold: 21,   domain_int: [-0.4,2.7], bins_int: 175},
      38995: {threshold: 19,   domain_int: [-0.6,2.7], bins_int: 175},
    },
    # M8(1)
    17: {
      39015: {threshold: 26.5, bins_int: 60, domain_int:[-0.3,2.1]},
      39016: {threshold: 23,  bins_int: 65, domain_int:[-0.3,2.5]},
      38999: {threshold: 21.5,  bins_int: 65, domain_int:[-0.3,2.5]},
      39000: {threshold: 21, domain_int:[-0.3,2.5]},
      39001: {threshold: 20},
      39002: {threshold: 19},
      39003: {threshold: 19, domain_int:[-0.5,2]},
      39004: {threshold: 17},
      39005: {threshold: 16},
    },
    # M8(2)
    10: {
      39015: {threshold: 29, domain_int:[-0.3,2.3], bins_int: 60},
      39016: {threshold: 27, domain_int:[-0.3,2.5], bins_int: 70},
      38999: {threshold: 26, domain_int:[-0.3,2.5], bins_int: 70},
      39000: {threshold: 22, domain_int:[-0.3,2.5]},
      39001: {threshold: 21},
      39002: {threshold: 20.5},
      39003: {threshold: 20, domain_int:[-0.5,2.1]},
      39004: {threshold: 19, domain_int:[-0.7,2.1]},
      39005: {threshold: 18},
    },
  }
}
